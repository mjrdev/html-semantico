export function formValidator(){const e=document.querySelector("#formCadastro");e&&e.addEventListener("submit",t=>{t.preventDefault();let r=!0,i=null;if(e.querySelectorAll("input[required]").forEach(e=>{const t=`${e.id}-error`;let o=document.getElementById(t);if(""!==e.value.trim()&&e.checkValidity())e.classList.remove("erro"),e.setAttribute("aria-invalid","false"),o&&o.remove();else{e.classList.add("erro"),e.setAttribute("aria-invalid","true"),o&&o.remove();const a=function(e){const t=e.getAttribute("name"),r={nome:"Nome completo",email:"Email",cpf:"CPF",telefone:"Telefone"};if(""===e.value.trim())return`${r[t]} é obrigatório.`;if("email"===e.type&&!e.checkValidity())return"Digite um email válido.";if("cpf"===t&&!e.checkValidity())return"Digite um CPF válido no formato 000.000.000-00.";return`${r[t]} inválido.`}(e);e.insertAdjacentHTML("afterend",`<span id="${t}" class="msg-erro" role="alert" aria-live="polite">${a}</span>`),i||(i=e),r=!1}}),r){const t=document.createElement("div");t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.className="success-message",t.textContent="Cadastro enviado com sucesso!",e.insertBefore(t,e.firstChild),e.reset(),setTimeout(()=>{t.parentNode&&t.remove()},5e3)}else i&&i.focus()})}